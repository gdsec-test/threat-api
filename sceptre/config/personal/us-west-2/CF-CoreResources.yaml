template_path: CF-CoreResources.yaml
dependencies:
  - {{environment}}/{{region}}/CF-CodeBucket.yaml
parameters:
  APIHash: !file_contents resources/api.sha1
hooks:
  before_create:
    - !cmd resources/upload-api-spec.sh
  after_create:
    - !cmd rm -f resources/api.sha1
    - !cmd resources/swagger-ui-bucket-create.sh
  before_update:
    - !cmd resources/upload-api-spec.sh
  after_update:
    - !cmd rm -f resources/api.sha1
  before_delete:
    - !cmd resources/swagger-ui-bucket-delete.py
