<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1036px" preserveAspectRatio="none" style="width:1254px;height:1036px;" version="1.1" viewBox="0 0 1254 1036" width="1254px" zoomAndPan="magnify"><defs><filter height="300%" id="f123tchq604d4q" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1024.3125" style="stroke:#A80036;stroke-width:1.0;" width="912.5" x="196" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="635.75" y="18.0669">AWS</text><rect fill="#D3D3D3" height="1024.3125" style="stroke:#A80036;stroke-width:1.0;" width="106" x="1130.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="1154.5" y="18.0669">Internet</text><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="516.5" y="279.0938"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="516.5" y="838.6172"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="732.5" y="465.0234"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="941.5" y="620.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="113" x2="113" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="224" x2="224" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="334.5" x2="334.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="427.5" x2="427.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="521.5" x2="521.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="648.5" x2="648.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="737.5" x2="737.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="868" x2="868" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="946" x2="946" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1056.5" x2="1056.5" y1="88.2969" y2="944.0156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1183.5" x2="1183.5" y1="88.2969" y2="944.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="94" y="84.9951">User</text><ellipse cx="113" cy="15" fill="#FEFECE" filter="url(#f123tchq604d4q)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M113,23 L113,50 M100,31 L126,31 M113,50 L100,65 M113,50 L126,65 " fill="none" filter="url(#f123tchq604d4q)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="94" y="956.0107">User</text><ellipse cx="113" cy="969.3125" fill="#FEFECE" filter="url(#f123tchq604d4q)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M113,977.3125 L113,1004.3125 M100,985.3125 L126,985.3125 M113,1004.3125 L100,1019.3125 M113,1004.3125 L126,1019.3125 " fill="none" filter="url(#f123tchq604d4q)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="200" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="207" y="72.9951">WAF</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="200" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="207" y="963.0107">WAF</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="73" x="296.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="322.5" y="56.6982">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="303.5" y="72.9951">Gateway</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="73" x="296.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="322.5" y="963.0107">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="303.5" y="979.3076">Gateway</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="85" x="383.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="413.5" y="56.6982">JWT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="390.5" y="72.9951">Authorizer</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="85" x="383.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="413.5" y="963.0107">JWT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="390.5" y="979.3076">Authorizer</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="482.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="489.5" y="72.9951">Manager</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="482.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="489.5" y="963.0107">Manager</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="625.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="632.5" y="72.9951">SNS</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="625.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="632.5" y="963.0107">SNS</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="104" x="685.5" y="32.7031"/><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="104" x="681.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="694" y="56.6982">Job Lambda</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="688.5" y="72.9951">(ServiceNow)</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="104" x="685.5" y="943.0156"/><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="104" x="681.5" y="947.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="694" y="967.0107">Job Lambda</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="688.5" y="983.3076">(ServiceNow)</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="43" x="845" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="852" y="72.9951">SQS</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="43" x="845" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="852" y="963.0107">SQS</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="85" x="902" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="909" y="56.6982">Response</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="909.5" y="72.9951">Processor</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="85" x="902" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="909" y="963.0107">Response</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="909.5" y="979.3076">Processor</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1008.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1015.5" y="72.9951">DynamoDB</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1008.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1015.5" y="963.0107">DynamoDB</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="94" x="1134.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="1141.5" y="72.9951">ServiceNow</text><rect fill="#FEFECE" filter="url(#f123tchq604d4q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="94" x="1134.5" y="943.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="1141.5" y="963.0107">ServiceNow</text><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="516.5" y="279.0938"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="516.5" y="838.6172"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="732.5" y="465.0234"/><rect fill="#FFFFFF" filter="url(#f123tchq604d4q)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="941.5" y="620.6875"/><rect fill="#EEEEEE" filter="url(#f123tchq604d4q)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1247.5" x="0" y="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1247.5" y1="118.8633" y2="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1247.5" y1="121.8633" y2="121.8633"/><rect fill="#EEEEEE" filter="url(#f123tchq604d4q)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="231" x="508.25" y="108.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="514.25" y="124.3638">User makes new job request</text><polygon fill="#A80036" points="212,158.5625,222,162.5625,212,166.5625,216,162.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="113" x2="218" y1="162.5625" y2="162.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="120" y="157.4966">POST request</text><polygon fill="#A80036" points="323,187.6953,333,191.6953,323,195.6953,327,191.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="224" x2="329" y1="191.6953" y2="191.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="231" y="186.6294">POST request</text><polygon fill="#A80036" points="416,216.8281,426,220.8281,416,224.8281,420,220.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335" x2="422" y1="220.8281" y2="220.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="342" y="215.7622">Check JWT</text><polygon fill="#A80036" points="346,245.9609,336,249.9609,346,253.9609,342,249.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="340" x2="427" y1="249.9609" y2="249.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="352" y="244.895">JWT valid</text><polygon fill="#A80036" points="504.5,275.0938,514.5,279.0938,504.5,283.0938,508.5,279.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335" x2="510.5" y1="279.0938" y2="279.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="342" y="274.0278">Request</text><polygon fill="#A80036" points="1044.5,304.2266,1054.5,308.2266,1044.5,312.2266,1048.5,308.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="526.5" x2="1050.5" y1="308.2266" y2="308.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="533.5" y="303.1606">Store job_id</text><polygon fill="#A80036" points="636.5,333.3594,646.5,337.3594,636.5,341.3594,640.5,337.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="526.5" x2="642.5" y1="337.3594" y2="337.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="533.5" y="332.2935">Publish request</text><polygon fill="#A80036" points="124,362.4922,114,366.4922,124,370.4922,120,366.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="118" x2="520.5" y1="366.4922" y2="366.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="130" y="361.4263">job_id</text><path d="M5,379.4922 L5,434.4922 L218,434.4922 L218,389.4922 L208,379.4922 L5,379.4922 " fill="#FBFB77" filter="url(#f123tchq604d4q)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M208,379.4922 L208,389.4922 L218,389.4922 L208,379.4922 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="11" y="396.5591">At this point the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="15" y="411.6919">request is done and the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="15" y="426.8247">must poll for the result</text><polygon fill="#A80036" points="720.5,461.0234,730.5,465.0234,720.5,469.0234,724.5,465.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="648.5" x2="726.5" y1="465.0234" y2="465.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="655.5" y="459.9575">invokes</text><polygon fill="#A80036" points="1171.5,490.1563,1181.5,494.1563,1171.5,498.1563,1175.5,494.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="1177.5" y1="494.1563" y2="494.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="749.5" y="489.0903">Request</text><polygon fill="#A80036" points="753.5,519.2891,743.5,523.2891,753.5,527.2891,749.5,523.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="747.5" x2="1182.5" y1="523.2891" y2="523.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="759.5" y="518.2231">Response</text><polygon fill="#A80036" points="856.5,548.4219,866.5,552.4219,856.5,556.4219,860.5,552.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="862.5" y1="552.4219" y2="552.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="744.5" y="547.356">Enqueue output</text><path d="M697,565.4219 L697,590.4219 L773,590.4219 L773,575.4219 L763,565.4219 L697,565.4219 " fill="#FBFB77" filter="url(#f123tchq604d4q)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M763,565.4219 L763,575.4219 L773,575.4219 L763,565.4219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="703" y="582.4888">Job done</text><polygon fill="#A80036" points="929.5,616.6875,939.5,620.6875,929.5,624.6875,933.5,620.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="868.5" x2="935.5" y1="620.6875" y2="620.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="875.5" y="615.6216">invokes</text><polygon fill="#A80036" points="1044.5,645.8203,1054.5,649.8203,1044.5,653.8203,1048.5,649.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="946.5" x2="1050.5" y1="649.8203" y2="649.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="953.5" y="644.7544">Store output</text><rect fill="#EEEEEE" filter="url(#f123tchq604d4q)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1247.5" x="0" y="678.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1247.5" y1="678.3867" y2="678.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1247.5" y1="681.3867" y2="681.3867"/><rect fill="#EEEEEE" filter="url(#f123tchq604d4q)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="288" x="479.75" y="667.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="269" x="485.75" y="683.8872">User retrieves job status and output</text><polygon fill="#A80036" points="212,718.0859,222,722.0859,212,726.0859,216,722.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="113" x2="218" y1="722.0859" y2="722.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="120" y="717.02">GET status</text><polygon fill="#A80036" points="323,747.2188,333,751.2188,323,755.2188,327,751.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="224" x2="329" y1="751.2188" y2="751.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="231" y="746.1528">GET status</text><polygon fill="#A80036" points="416,776.3516,426,780.3516,416,784.3516,420,780.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335" x2="422" y1="780.3516" y2="780.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="342" y="775.2856">Check JWT</text><polygon fill="#A80036" points="346,805.4844,336,809.4844,346,813.4844,342,809.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="340" x2="427" y1="809.4844" y2="809.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="352" y="804.4185">JWT valid</text><polygon fill="#A80036" points="504.5,834.6172,514.5,838.6172,504.5,842.6172,508.5,838.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335" x2="510.5" y1="838.6172" y2="838.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="342" y="833.5513">Request</text><polygon fill="#A80036" points="1044.5,863.75,1054.5,867.75,1044.5,871.75,1048.5,867.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="526.5" x2="1050.5" y1="867.75" y2="867.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="533.5" y="862.6841">Get job_id</text><polygon fill="#A80036" points="537.5,892.8828,527.5,896.8828,537.5,900.8828,533.5,896.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="531.5" x2="1055.5" y1="896.8828" y2="896.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="543.5" y="891.8169">Job output</text><polygon fill="#A80036" points="124,922.0156,114,926.0156,124,930.0156,120,926.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="118" x2="520.5" y1="926.0156" y2="926.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="130" y="920.9497">Job output</text><!--MD5=[f363b6a4f66d535b4dd1e7c7cb007f1a]
@startuml "job_request_flow"
skinparam BoxPadding 10
actor User

box "AWS" #LightBlue

participant WAF
participant "API\nGateway" as API_Gateway
participant "JWT\nAuthorizer" as JWT_Authorizer

== User makes new job request ==

User -> WAF : POST request
WAF -> API_Gateway : POST request
API_Gateway -> JWT_Authorizer: Check JWT
JWT_Authorizer -> API_Gateway: JWT valid
API_Gateway -> Manager : Request
activate Manager
Manager -> DynamoDB : Store job_id
Manager -> SNS : Publish request
Manager -> User : job_id
deactivate Manager
note over User : At this point the \n request is done and the user \n must poll for the result
collections "Job Lambda\n(ServiceNow)" as Job_Lambda
SNS -> Job_Lambda : invokes
activate Job_Lambda
participant SQS
participant "Response\nProcessor" as ResponseProcessor
database DynamoDB

end box

box "Internet" #LightGrey

Job_Lambda -> ServiceNow : Request
ServiceNow -> Job_Lambda : Response
Job_Lambda -> SQS : Enqueue output
note over Job_Lambda : Job done
deactivate Job_Lambda

SQS -> ResponseProcessor : invokes
activate ResponseProcessor
ResponseProcessor -> DynamoDB : Store output
deactivate ResponseProcessor

end box

== User retrieves job status and output ==

User -> WAF : GET status
WAF -> API_Gateway : GET status
API_Gateway -> JWT_Authorizer: Check JWT
JWT_Authorizer -> API_Gateway: JWT valid
API_Gateway -> Manager : Request
activate Manager
Manager -> DynamoDB : Get job_id
DynamoDB -> Manager : Job output
Manager -> User : Job output
deactivate Manager

@enduml

PlantUML version 1.2020.22(Sun Dec 06 02:36:27 MST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
