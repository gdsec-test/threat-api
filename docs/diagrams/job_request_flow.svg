<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1183px" preserveAspectRatio="none" style="width:1291px;height:1183px;" version="1.1" viewBox="0 0 1291 1183" width="1291px" zoomAndPan="magnify"><defs><filter height="300%" id="faj2y8m79b8t9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1171.9141" style="stroke:#A80036;stroke-width:1.0;" width="957.5" x="189.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="653.75" y="18.5684">AWS</text><rect fill="#D3D3D3" height="1171.9141" style="stroke:#A80036;stroke-width:1.0;" width="104" x="1169" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1194" y="18.5684">Internet</text><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="130.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="280.3516"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="145.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="927.873"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="771" y="509.8359"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="71.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="974" y="666.3887"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="110" x2="110" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="217.5" x2="217.5" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="324" x2="324" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="418" x2="418" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="689" x2="689" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="776" x2="776" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="903.5" x2="903.5" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="978.5" x2="978.5" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1097" x2="1097" y1="88.4883" y2="1091.4258"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1221" x2="1221" y1="88.4883" y2="1091.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="92" y="85.5352">User</text><ellipse cx="110.5" cy="15" fill="#FEFECE" filter="url(#faj2y8m79b8t9)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M110.5,23 L110.5,50 M97.5,31 L123.5,31 M110.5,50 L97.5,65 M110.5,50 L123.5,65 " fill="none" filter="url(#faj2y8m79b8t9)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="92" y="1103.9609">User</text><ellipse cx="110.5" cy="1116.9141" fill="#FEFECE" filter="url(#faj2y8m79b8t9)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M110.5,1124.9141 L110.5,1151.9141 M97.5,1132.9141 L123.5,1132.9141 M110.5,1151.9141 L97.5,1166.9141 M110.5,1151.9141 L123.5,1166.9141 " fill="none" filter="url(#faj2y8m79b8t9)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="44" x="193.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="200.5" y="73.5352">WAF</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="44" x="193.5" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="200.5" y="1110.9609">WAF</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="71" x="287" y="36.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="311.5" y="57.0469">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="294" y="73.5352">Gateway</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="71" x="287" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="311.5" y="1110.9609">API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="294" y="1127.4492">Gateway</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="88" x="372" y="36.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="403.5" y="57.0469">JWT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="379" y="73.5352">Authorizer</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="88" x="372" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="403.5" y="1110.9609">JWT</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="379" y="1127.4492">Authorizer</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="74" x="474" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="481" y="73.5352">Manager</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="74" x="474" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="481" y="1110.9609">Manager</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="667" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="674" y="73.5352">SNS</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="40" x="667" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="674" y="1110.9609">SNS</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="102" x="725" y="32.5117"/><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="102" x="721" y="36.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="732" y="57.0469">Job Lambda</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="728" y="73.5352">(ServiceNow)</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="102" x="725" y="1090.4258"/><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="102" x="721" y="1094.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="732" y="1114.9609">Job Lambda</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="728" y="1131.4492">(ServiceNow)</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="41" x="881.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="888.5" y="73.5352">SQS</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="41" x="881.5" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="888.5" y="1110.9609">SQS</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="81" x="936.5" y="36.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="944" y="57.0469">Response</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="943.5" y="73.5352">Processor</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="81" x="936.5" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="944" y="1110.9609">Response</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="943.5" y="1127.4492">Processor</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="1051" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1058" y="73.5352">DynamoDB</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="1051" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1058" y="1110.9609">DynamoDB</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1173" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1180" y="73.5352">ServiceNow</text><rect fill="#FEFECE" filter="url(#faj2y8m79b8t9)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1173" y="1090.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1180" y="1110.9609">ServiceNow</text><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="130.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="280.3516"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="145.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="508" y="927.873"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="87.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="771" y="509.8359"/><rect fill="#FFFFFF" filter="url(#faj2y8m79b8t9)" height="71.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="974" y="666.3887"/><rect fill="#EEEEEE" filter="url(#faj2y8m79b8t9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1284" x="0" y="119.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1284" y1="119.1436" y2="119.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1284" y1="122.1436" y2="122.1436"/><rect fill="#EEEEEE" filter="url(#faj2y8m79b8t9)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="210" x="537" y="108.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="543" y="125.0566">User makes new job request</text><polygon fill="#A80036" points="205.5,159.1094,215.5,163.1094,205.5,167.1094,209.5,163.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="110.5" x2="211.5" y1="163.1094" y2="163.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="117.5" y="158.3672">POST request</text><polygon fill="#A80036" points="312.5,188.4199,322.5,192.4199,312.5,196.4199,316.5,192.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="217.5" x2="318.5" y1="192.4199" y2="192.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="224.5" y="187.6777">POST request</text><polygon fill="#A80036" points="406,217.7305,416,221.7305,406,225.7305,410,221.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324.5" x2="412" y1="221.7305" y2="221.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="331.5" y="216.9883">Check JWT</text><polygon fill="#A80036" points="335.5,247.041,325.5,251.041,335.5,255.041,331.5,251.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="329.5" x2="417" y1="251.041" y2="251.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="341.5" y="246.2988">JWT valid</text><polygon fill="#A80036" points="496,276.3516,506,280.3516,496,284.3516,500,280.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324.5" x2="502" y1="280.3516" y2="280.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="331.5" y="275.6094">Request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="560" y1="309.6621" y2="309.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="560" x2="560" y1="309.6621" y2="322.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="519" x2="560" y1="322.6621" y2="322.6621"/><polygon fill="#A80036" points="529,318.6621,519,322.6621,529,326.6621,525,322.6621" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="525" y="304.9199">Encrypt request</text><polygon fill="#A80036" points="1085,347.9727,1095,351.9727,1085,355.9727,1089,351.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="1091" y1="351.9727" y2="351.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="525" y="347.2305">Store job_id and encrypted request</text><polygon fill="#A80036" points="677,377.2832,687,381.2832,677,385.2832,681,381.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="683" y1="381.2832" y2="381.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="525" y="376.541">Publish request</text><polygon fill="#A80036" points="121.5,406.5938,111.5,410.5938,121.5,414.5938,117.5,410.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115.5" x2="512" y1="410.5938" y2="410.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="127.5" y="405.8516">job_id</text><path d="M5,423.5938 L5,478.5938 L213,478.5938 L213,433.5938 L203,423.5938 L5,423.5938 " fill="#FBFB77" filter="url(#faj2y8m79b8t9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M203,423.5938 L203,433.5938 L213,433.5938 L203,423.5938 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="11" y="441.1621">At this point the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="15" y="456.4727">request is done and the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="15" y="471.7832">must poll for the result</text><polygon fill="#A80036" points="759,505.8359,769,509.8359,759,513.8359,763,509.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="689" x2="765" y1="509.8359" y2="509.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="696" y="505.0938">invokes</text><polygon fill="#A80036" points="1209,535.1465,1219,539.1465,1209,543.1465,1213,539.1465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="781" x2="1215" y1="539.1465" y2="539.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="788" y="534.4043">Request</text><polygon fill="#A80036" points="792,564.457,782,568.457,792,572.457,788,568.457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="786" x2="1220" y1="568.457" y2="568.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="798" y="563.7148">Response</text><polygon fill="#A80036" points="892,593.7676,902,597.7676,892,601.7676,896,597.7676" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="776" x2="898" y1="597.7676" y2="597.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="783" y="593.0254">Enqueue output</text><path d="M736,610.7676 L736,635.7676 L812,635.7676 L812,620.7676 L802,610.7676 L736,610.7676 " fill="#FBFB77" filter="url(#faj2y8m79b8t9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M802,610.7676 L802,620.7676 L812,620.7676 L802,610.7676 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="742" y="628.3359">Job done</text><polygon fill="#A80036" points="962,662.3887,972,666.3887,962,670.3887,966,666.3887" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="904" x2="968" y1="666.3887" y2="666.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="911" y="661.6465">invokes</text><line style="stroke:#A80036;stroke-width:1.0;" x1="984" x2="1026" y1="695.6992" y2="695.6992"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1026" x2="1026" y1="695.6992" y2="708.6992"/><line style="stroke:#A80036;stroke-width:1.0;" x1="985" x2="1026" y1="708.6992" y2="708.6992"/><polygon fill="#A80036" points="995,704.6992,985,708.6992,995,712.6992,991,708.6992" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="991" y="690.957">Encrypt results</text><polygon fill="#A80036" points="1085,734.0098,1095,738.0098,1085,742.0098,1089,738.0098" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="979" x2="1091" y1="738.0098" y2="738.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="986" y="733.2676">Store output</text><rect fill="#EEEEEE" filter="url(#faj2y8m79b8t9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1284" x="0" y="766.665"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1284" y1="766.665" y2="766.665"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1284" y1="769.665" y2="769.665"/><rect fill="#EEEEEE" filter="url(#faj2y8m79b8t9)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="262" x="511" y="756.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="244" x="517" y="772.5781">User retrieves job status and output</text><polygon fill="#A80036" points="205.5,806.6309,215.5,810.6309,205.5,814.6309,209.5,810.6309" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="110.5" x2="211.5" y1="810.6309" y2="810.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="117.5" y="805.8887">GET status</text><polygon fill="#A80036" points="312.5,835.9414,322.5,839.9414,312.5,843.9414,316.5,839.9414" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="217.5" x2="318.5" y1="839.9414" y2="839.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="224.5" y="835.1992">GET status</text><polygon fill="#A80036" points="406,865.252,416,869.252,406,873.252,410,869.252" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324.5" x2="412" y1="869.252" y2="869.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="331.5" y="864.5098">Check JWT</text><polygon fill="#A80036" points="335.5,894.5625,325.5,898.5625,335.5,902.5625,331.5,898.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="329.5" x2="417" y1="898.5625" y2="898.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="341.5" y="893.8203">JWT valid</text><polygon fill="#A80036" points="496,923.873,506,927.873,496,931.873,500,927.873" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324.5" x2="502" y1="927.873" y2="927.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="331.5" y="923.1309">Request</text><polygon fill="#A80036" points="1085,953.1836,1095,957.1836,1085,961.1836,1089,957.1836" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="1091" y1="957.1836" y2="957.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="525" y="952.4414">Get job_id</text><polygon fill="#A80036" points="529,982.4941,519,986.4941,529,990.4941,525,986.4941" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="523" x2="1096" y1="986.4941" y2="986.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="535" y="981.752">Job output</text><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="560" y1="1031.1152" y2="1031.1152"/><line style="stroke:#A80036;stroke-width:1.0;" x1="560" x2="560" y1="1031.1152" y2="1044.1152"/><line style="stroke:#A80036;stroke-width:1.0;" x1="519" x2="560" y1="1044.1152" y2="1044.1152"/><polygon fill="#A80036" points="529,1040.1152,519,1044.1152,529,1048.1152,525,1044.1152" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="525" y="1011.0625">Decrypt original request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="525" y="1026.373">and each response</text><polygon fill="#A80036" points="121.5,1069.4258,111.5,1073.4258,121.5,1077.4258,117.5,1073.4258" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115.5" x2="512" y1="1073.4258" y2="1073.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="127.5" y="1068.6836">Job output</text><!--MD5=[1172abf65760587b4813b8dadffe5baf]
@startuml "job_request_flow"
skinparam BoxPadding 10
actor User

box "AWS" #LightBlue

participant WAF
participant "API\nGateway" as API_Gateway
participant "JWT\nAuthorizer" as JWT_Authorizer

== User makes new job request ==

User -> WAF : POST request
WAF -> API_Gateway : POST request
API_Gateway -> JWT_Authorizer: Check JWT
JWT_Authorizer -> API_Gateway: JWT valid
API_Gateway -> Manager : Request
activate Manager
Manager -> Manager : Encrypt request
Manager -> DynamoDB : Store job_id and encrypted request
Manager -> SNS : Publish request
Manager -> User : job_id
deactivate Manager
note over User : At this point the \n request is done and the user \n must poll for the result
collections "Job Lambda\n(ServiceNow)" as Job_Lambda
SNS -> Job_Lambda : invokes
activate Job_Lambda
participant SQS
participant "Response\nProcessor" as ResponseProcessor
database DynamoDB

end box

box "Internet" #LightGrey

Job_Lambda -> ServiceNow : Request
ServiceNow -> Job_Lambda : Response
Job_Lambda -> SQS : Enqueue output
note over Job_Lambda : Job done
deactivate Job_Lambda

SQS -> ResponseProcessor : invokes
activate ResponseProcessor
ResponseProcessor -> ResponseProcessor : Encrypt results
ResponseProcessor -> DynamoDB : Store output
deactivate ResponseProcessor

end box

== User retrieves job status and output ==

User -> WAF : GET status
WAF -> API_Gateway : GET status
API_Gateway -> JWT_Authorizer: Check JWT
JWT_Authorizer -> API_Gateway: JWT valid
API_Gateway -> Manager : Request
activate Manager
Manager -> DynamoDB : Get job_id
DynamoDB -> Manager : Job output
Manager -> Manager : Decrypt original request\nand each response
Manager -> User : Job output
deactivate Manager

@enduml

PlantUML version 1.2020.22(Sun Dec 06 01:36:27 PST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
