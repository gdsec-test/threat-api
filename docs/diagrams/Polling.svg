<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:827px;height:490px;" version="1.1" viewBox="0 0 827 490" width="827px" zoomAndPan="magnify"><defs><filter height="300%" id="f9xe0zoafp6bi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="478.082" style="stroke: #A80036; stroke-width: 1.0;" width="654" x="167.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="480" y="18.5684">AWS</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="97" x2="97" y1="88.4883" y2="397.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="195.5" x2="195.5" y1="88.4883" y2="397.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="293.5" x2="293.5" y1="88.4883" y2="397.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="413.5" x2="413.5" y1="88.4883" y2="397.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="556.5" x2="556.5" y1="88.4883" y2="397.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="771.5" x2="771.5" y1="88.4883" y2="397.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="79" y="85.5352">User</text><ellipse cx="97.5" cy="15" fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M97.5,23 L97.5,50 M84.5,31 L110.5,31 M97.5,50 L84.5,65 M97.5,50 L110.5,65 " fill="none" filter="url(#f9xe0zoafp6bi)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="79" y="410.1289">User</text><ellipse cx="97.5" cy="423.082" fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M97.5,431.082 L97.5,458.082 M84.5,439.082 L110.5,439.082 M97.5,458.082 L84.5,473.082 M97.5,458.082 L110.5,473.082 " fill="none" filter="url(#f9xe0zoafp6bi)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="171.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="178.5" y="73.5352">WAF</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="171.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="178.5" y="417.1289">WAF</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="241.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="248.5" y="73.5352">API_Gateway</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="241.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="248.5" y="417.1289">API_Gateway</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="355.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="362.5" y="73.5352">JWT_Autorizor</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="355.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="362.5" y="417.1289">JWT_Autorizor</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="481.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="488.5" y="73.5352">Job_Status_Lambda</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="481.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="488.5" y="417.1289">Job_Status_Lambda</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="725.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="732.5" y="73.5352">DynamoDB</text><rect fill="#FEFECE" filter="url(#f9xe0zoafp6bi)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="725.5" y="396.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="732.5" y="417.1289">DynamoDB</text><path d="M5,103.4883 L5,143.4883 L187,143.4883 L187,113.4883 L177,103.4883 L5,103.4883 " fill="#FBFB77" filter="url(#f9xe0zoafp6bi)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M177,103.4883 L177,113.4883 L187,113.4883 L177,103.4883 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="11" y="121.0566">The user waits some time</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="11" y="136.3672">for the request to finish</text><polygon fill="#A80036" points="183.5,170.4199,193.5,174.4199,183.5,178.4199,187.5,174.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="189.5" y1="174.4199" y2="174.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="104.5" y="169.6777">GET /status</text><polygon fill="#A80036" points="281.5,199.7305,291.5,203.7305,281.5,207.7305,285.5,203.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="195.5" x2="287.5" y1="203.7305" y2="203.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="202.5" y="198.9883">GET /status</text><polygon fill="#A80036" points="401.5,229.041,411.5,233.041,401.5,237.041,405.5,233.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="293.5" x2="407.5" y1="233.041" y2="233.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="300.5" y="228.2988">Check JWT</text><polygon fill="#A80036" points="304.5,258.3516,294.5,262.3516,304.5,266.3516,300.5,262.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298.5" x2="412.5" y1="262.3516" y2="262.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="310.5" y="257.6094">JWT good</text><polygon fill="#A80036" points="544.5,287.6621,554.5,291.6621,544.5,295.6621,548.5,291.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="293.5" x2="550.5" y1="291.6621" y2="291.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="300.5" y="286.9199">Check status with job_id</text><polygon fill="#A80036" points="759.5,316.9727,769.5,320.9727,759.5,324.9727,763.5,320.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="556.5" x2="765.5" y1="320.9727" y2="320.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="563.5" y="316.2305">Look up job_id</text><polygon fill="#A80036" points="567.5,346.2832,557.5,350.2832,567.5,354.2832,563.5,350.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561.5" x2="770.5" y1="350.2832" y2="350.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="573.5" y="345.541">job_id, job_status, result_data</text><polygon fill="#A80036" points="108.5,375.5938,98.5,379.5938,108.5,383.5938,104.5,379.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102.5" x2="555.5" y1="379.5938" y2="379.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="114.5" y="374.8516">job_id, job_status, result_data</text><!--MD5=[969ca8d4849200165f449599b8570470]
@startuml "Polling"
actor User
note over User : The user waits some time\nfor the request to finish
box "AWS" #LightBlue
User -> WAF : GET /status
WAF -> API_Gateway : GET /status
API_Gateway -> JWT_Autorizor: Check JWT
JWT_Autorizor -> API_Gateway: JWT good
API_Gateway -> Job_Status_Lambda : Check status with job_id
Job_Status_Lambda -> DynamoDB : Look up job_id
DynamoDB -> Job_Status_Lambda : job_id, job_status, result_data
Job_Status_Lambda -> User : job_id, job_status, result_data
end box
@enduml

PlantUML version 1.2020.18(Wed Sep 30 15:40:44 EDT 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
